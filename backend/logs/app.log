2025-09-06 19:10:43,458 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:10:43,459 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:10:43,461 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:10:43,463 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:10,490 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:10,490 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:10,496 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:10,496 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:25,507 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:25,508 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:25,510 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:25,510 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:40,371 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:11:40,371 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:11:40,528 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:40,528 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:11:40,529 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:11:40,529 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:11:40,529 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:11:40,530 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:11:40,530 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:40,531 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:40,531 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:11:40,532 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:11:40,532 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:11:40,532 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:11:40,533 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:11:40,533 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:49,300 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:11:49,361 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:11:49,454 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:49,454 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:11:49,455 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:11:49,456 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:11:49,456 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:11:49,456 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:11:49,457 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:11:49,509 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:11:49,509 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:11:49,510 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:11:49,511 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:11:49,511 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:11:49,511 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:11:49,512 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:12:04,320 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:12:04,321 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:12:25,223 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:12:25,223 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:12:25,410 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:12:25,411 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:12:25,411 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:12:25,411 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:12:25,414 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:12:25,414 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:12:25,416 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:12:25,416 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:12:25,416 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:12:25,416 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:12:25,417 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:12:25,417 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:12:25,418 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:12:25,418 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:20:39,348 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:20:39,537 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:20:39,537 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:20:39,540 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:20:39,541 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:20:39,541 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:20:39,541 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:20:39,542 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:21:15,285 - travel_expense_api - ERROR - Database session error: 403: Not authenticated
2025-09-06 19:21:15,286 - travel_expense_api - ERROR - HTTP 500 error on http://localhost:8000/api/v1/travels/: Database connection error
2025-09-06 19:21:52,248 - travel_expense_api - ERROR - Database session error: 401: Could not validate credentials
2025-09-06 19:21:52,251 - travel_expense_api - ERROR - HTTP 500 error on http://localhost:8000/api/v1/travels/: Database connection error
2025-09-06 19:22:17,683 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:22:17,856 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:22:17,856 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:22:17,860 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:22:17,861 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:22:17,861 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:22:17,861 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:22:17,861 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:22:55,416 - travel_expense_api - ERROR - Database session error: 401: Could not validate credentials
2025-09-06 19:22:55,417 - travel_expense_api - ERROR - HTTP 500 error on http://localhost:8000/api/v1/travels/: Database connection error
2025-09-06 19:23:41,687 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:23:41,848 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:23:41,848 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:23:41,851 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:23:41,851 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:23:41,851 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:23:41,852 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:23:41,852 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:23:58,199 - travel_expense_api - ERROR - HTTP 401 error on http://localhost:8000/api/v1/travels/: Could not validate credentials
2025-09-06 19:24:06,228 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-06 19:24:06,240 - travel_expense_api - ERROR - Unexpected error during login for admin@demo.com: (sqlite3.OperationalError) no such column: users.password_hash
[SQL: SELECT users.id, users.email, users.name, users.role, users.company, users.department, users.cost_center, users.is_active, users.password_hash, users.controller_id 
FROM users 
WHERE users.email = ?]
[parameters: ('admin@demo.com',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:24:06,241 - travel_expense_api - ERROR - HTTP 500 error on http://localhost:8000/api/v1/auth/login: An error occurred during login
2025-09-06 19:25:08,995 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-06 19:25:09,002 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 19:25:09,266 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 7)
2025-09-06 19:25:15,952 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/: (sqlite3.OperationalError) no such column: travels.departure_location
[SQL: SELECT travels.id, travels.employee_name, travels.employee_id, travels.start_at, travels.end_at, travels.departure_location, travels.departure_timestamp, travels.arrival_at_destination_timestamp, travels.departure_from_destination_timestamp, travels.arrival_home_timestamp, travels.destination_city, travels.destination_country, travels.purpose, travels.cost_center, travels.status 
FROM travels ORDER BY travels.id DESC
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:25:15,964 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: travels.departure_location

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 80, in get_all_travels
    return await crud_travel.get_multi(db, skip=skip, limit=limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 21, in get_multi
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: travels.departure_location
[SQL: SELECT travels.id, travels.employee_name, travels.employee_id, travels.start_at, travels.end_at, travels.departure_location, travels.departure_timestamp, travels.arrival_at_destination_timestamp, travels.departure_from_destination_timestamp, travels.arrival_home_timestamp, travels.destination_city, travels.destination_country, travels.purpose, travels.cost_center, travels.status 
FROM travels ORDER BY travels.id DESC
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 19:25:56,771 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:25:56,781 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:25:56,788 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:25:56,789 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:25:56,789 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:25:56,794 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:26:16,827 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:26:16,988 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:26:16,989 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:26:16,989 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:26:16,990 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:26:16,990 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:26:16,991 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:26:16,991 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:26:30,240 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-06 19:26:30,252 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 19:26:30,514 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 7)
2025-09-06 19:26:58,291 - travel_expense_api - ERROR - Starlette HTTP 404 error on http://localhost:8000/api/v1/nonexistent: Not Found
2025-09-06 19:27:58,630 - travel_expense_api - ERROR - HTTP 401 error on http://localhost:8000/api/v1/travels/: Could not validate credentials
2025-09-06 19:28:02,796 - travel_expense_api - ERROR - HTTP 401 error on http://localhost:8000/api/v1/travels/: Could not validate credentials
2025-09-06 19:28:27,926 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:28:28,793 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:28:28,925 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:28:28,925 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:28:28,926 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:28:28,927 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:28:28,927 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:28:28,927 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:28:28,928 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:29:20,944 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 19:29:20,961 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 19:29:21,231 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 3)
2025-09-06 19:29:22,279 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?, ?, ?, ?)]
[parameters: (32, 31, 30, 29)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:29:22,293 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: receipts.original_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 46, in get_all_travels
    return await crud_travel.get_multi_by_employee_id(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        db, employee_id=current_user.id, skip=skip, limit=limit
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 49, in get_multi_by_employee_id
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 296, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 587, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 246, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1560, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3247, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3323, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?, ?, ?, ?)]
[parameters: (32, 31, 30, 29)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 19:30:11,605 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?)]
[parameters: (33,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:30:11,613 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: receipts.original_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 31, in create_travel
    return await crud_travel.create(db=db, obj_in=travel_in)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 82, in create
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 296, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 587, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 246, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1560, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3247, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3323, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?)]
[parameters: (33,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 19:32:48,245 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:32:48,258 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:32:48,267 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:32:48,268 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:32:48,268 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:32:48,274 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:33:24,753 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:33:25,902 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:33:26,037 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:33:26,037 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:33:26,038 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:33:26,038 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:33:26,038 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:33:26,039 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:33:26,039 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:35:03,971 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?)]
[parameters: (34,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:35:03,985 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: receipts.original_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 31, in create_travel
    return await crud_travel.create(db=db, obj_in=travel_in)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 82, in create
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 296, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 587, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 246, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1560, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3247, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3323, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?)]
[parameters: (34,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 19:35:07,665 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?, ?, ?, ?, ?, ?)]
[parameters: (34, 33, 32, 31, 30, 29)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:35:07,672 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: receipts.original_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 46, in get_all_travels
    return await crud_travel.get_multi_by_employee_id(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        db, employee_id=current_user.id, skip=skip, limit=limit
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 49, in get_multi_by_employee_id
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 296, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 587, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 246, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1560, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3247, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3323, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?, ?, ?, ?, ?, ?)]
[parameters: (34, 33, 32, 31, 30, 29)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 19:35:10,684 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?, ?, ?, ?, ?, ?)]
[parameters: (34, 33, 32, 31, 30, 29)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:35:10,693 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: receipts.original_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 46, in get_all_travels
    return await crud_travel.get_multi_by_employee_id(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        db, employee_id=current_user.id, skip=skip, limit=limit
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 49, in get_multi_by_employee_id
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 296, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 587, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 246, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1560, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3247, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3323, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?, ?, ?, ?, ?, ?)]
[parameters: (34, 33, 32, 31, 30, 29)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 19:35:32,324 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?)]
[parameters: (35,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 19:35:32,334 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: receipts.original_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 31, in create_travel
    return await crud_travel.create(db=db, obj_in=travel_in)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 82, in create
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 296, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 587, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 246, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1560, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3247, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3323, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: receipts.original_filename
[SQL: SELECT receipts.travel_id AS receipts_travel_id, receipts.id AS receipts_id, receipts.file_path AS receipts_file_path, receipts.original_filename AS receipts_original_filename, receipts.file_size AS receipts_file_size, receipts.mime_type AS receipts_mime_type, receipts.amount AS receipts_amount, receipts.currency AS receipts_currency, receipts.date AS receipts_date, receipts.vat AS receipts_vat, receipts.vat_rate AS receipts_vat_rate, receipts.merchant AS receipts_merchant, receipts.category AS receipts_category, receipts.invoice_number AS receipts_invoice_number, receipts.payment_method AS receipts_payment_method, receipts.merchant_address AS receipts_merchant_address, receipts.merchant_tax_id AS receipts_merchant_tax_id, receipts.parsing_status AS receipts_parsing_status, receipts.parsing_confidence AS receipts_parsing_confidence, receipts.parsed_at AS receipts_parsed_at, receipts.ocr_text AS receipts_ocr_text, receipts.notes AS receipts_notes, receipts.verified AS receipts_verified, receipts.created_at AS receipts_created_at, receipts.updated_at AS receipts_updated_at 
FROM receipts 
WHERE receipts.travel_id IN (?)]
[parameters: (35,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 19:38:05,498 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:38:06,662 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:38:06,803 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:38:06,803 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:38:06,804 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:38:06,804 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:38:06,804 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:38:06,810 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:38:06,810 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:38:41,655 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:38:41,873 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:38:41,873 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:38:41,874 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:38:41,876 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:38:41,876 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:38:41,877 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:38:41,877 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:38:42,334 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:38:42,483 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:38:42,483 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:38:42,488 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:38:42,489 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:38:42,489 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:38:42,489 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:38:42,490 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:38:50,744 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:39:03,822 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:39:03,965 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:39:03,965 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:39:03,966 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:39:03,967 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:39:03,967 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:39:03,968 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:39:03,968 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:39:22,341 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:39:22,483 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:39:22,483 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:39:22,484 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:39:22,484 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:39:22,484 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:39:22,485 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:39:22,485 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:39:29,450 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:39:41,449 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:39:41,599 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:39:41,599 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:39:41,600 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:39:41,601 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:39:41,601 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:39:41,602 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:39:41,602 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:39:47,608 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:40:00,360 - travel_expense_api - ERROR - Starlette HTTP 404 error on http://localhost:8000/api/v1/auth/create-admin: Not Found
2025-09-06 19:40:23,786 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-06 19:40:23,801 - travel_expense_api - WARNING - Login failed: User not found for email admin@demo.com
2025-09-06 19:40:23,802 - travel_expense_api - ERROR - HTTP 401 error on http://localhost:8000/api/v1/auth/login: Incorrect email or password
2025-09-06 19:41:11,365 - travel_expense_api - INFO - Login attempt for email: malte@demo.com
2025-09-06 19:41:11,373 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 19:41:11,637 - travel_expense_api - INFO - Login successful for user: malte@demo.com (ID: 5)
2025-09-06 19:41:21,026 - travel_expense_api - INFO - Login attempt for email: malte@demo.com
2025-09-06 19:41:21,263 - travel_expense_api - INFO - Login successful for user: malte@demo.com (ID: 5)
2025-09-06 19:41:21,280 - travel_expense_api - ERROR - Validation error on http://localhost:8000/api/v1/travels/: [{'type': 'missing', 'loc': ('body', 'employee_name'), 'msg': 'Field required', 'input': {'title': 'Test Travel', 'description': 'Test travel description', 'start_date': '2025-09-07T09:00:00Z', 'end_date': '2025-09-09T18:00:00Z', 'destination': 'Berlin', 'purpose': 'Business meeting', 'estimated_costs': 500.0}}, {'type': 'missing', 'loc': ('body', 'start_at'), 'msg': 'Field required', 'input': {'title': 'Test Travel', 'description': 'Test travel description', 'start_date': '2025-09-07T09:00:00Z', 'end_date': '2025-09-09T18:00:00Z', 'destination': 'Berlin', 'purpose': 'Business meeting', 'estimated_costs': 500.0}}, {'type': 'missing', 'loc': ('body', 'end_at'), 'msg': 'Field required', 'input': {'title': 'Test Travel', 'description': 'Test travel description', 'start_date': '2025-09-07T09:00:00Z', 'end_date': '2025-09-09T18:00:00Z', 'destination': 'Berlin', 'purpose': 'Business meeting', 'estimated_costs': 500.0}}, {'type': 'missing', 'loc': ('body', 'destination_city'), 'msg': 'Field required', 'input': {'title': 'Test Travel', 'description': 'Test travel description', 'start_date': '2025-09-07T09:00:00Z', 'end_date': '2025-09-09T18:00:00Z', 'destination': 'Berlin', 'purpose': 'Business meeting', 'estimated_costs': 500.0}}, {'type': 'missing', 'loc': ('body', 'destination_country'), 'msg': 'Field required', 'input': {'title': 'Test Travel', 'description': 'Test travel description', 'start_date': '2025-09-07T09:00:00Z', 'end_date': '2025-09-09T18:00:00Z', 'destination': 'Berlin', 'purpose': 'Business meeting', 'estimated_costs': 500.0}}]
2025-09-06 19:41:39,253 - travel_expense_api - INFO - Login attempt for email: malte@demo.com
2025-09-06 19:41:39,491 - travel_expense_api - INFO - Login successful for user: malte@demo.com (ID: 5)
2025-09-06 19:42:03,730 - travel_expense_api - ERROR - Starlette HTTP 404 error on http://localhost:8000/api/v1/travel-form-start.html: Not Found
2025-09-06 19:44:34,879 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 19:44:35,125 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 19:45:38,217 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:45:38,364 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:45:38,364 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:45:38,366 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:45:38,366 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:45:38,366 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:45:38,367 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:45:38,367 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:46:05,247 - travel_expense_api - ERROR - Starlette HTTP 405 error on http://localhost:8000/api/v1/travels/: Method Not Allowed
2025-09-06 19:46:20,135 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:46:20,351 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:46:20,351 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:46:20,352 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:46:20,353 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:46:20,353 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:46:20,354 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:46:20,354 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:46:20,774 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:46:20,950 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:46:20,950 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:46:20,951 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:46:20,951 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:46:20,951 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:46:20,952 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:46:20,952 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:46:28,808 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 19:46:28,824 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 19:46:29,086 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 19:47:12,716 - travel_expense_api - ERROR - Starlette HTTP 404 error on http://localhost:8000/debug-auth.html?id=c6844c68-c748-4d7c-a55e-7f69498821e7&vscodeBrowserReqId=1757180832711: Not Found
2025-09-06 19:48:10,188 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:48:10,331 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:48:10,331 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:48:10,332 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:48:10,332 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:48:10,332 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:48:10,333 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:48:10,333 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:48:16,433 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 19:48:16,575 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 19:48:16,575 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 19:48:16,576 - travel_expense_api - INFO - Testing database connection...
2025-09-06 19:48:16,576 - travel_expense_api - INFO - Database connection successful
2025-09-06 19:48:16,576 - travel_expense_api - INFO - Creating database tables...
2025-09-06 19:48:16,577 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 19:48:16,578 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 19:48:23,679 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 19:48:23,698 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 19:48:23,958 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 19:49:03,400 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 19:49:03,642 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 20:00:09,694 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 20:00:10,569 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 20:00:10,700 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 20:00:10,700 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 20:00:10,701 - travel_expense_api - INFO - Testing database connection...
2025-09-06 20:00:10,702 - travel_expense_api - INFO - Database connection successful
2025-09-06 20:00:10,702 - travel_expense_api - INFO - Creating database tables...
2025-09-06 20:00:10,703 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 20:00:10,703 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 20:00:23,552 - travel_expense_api - ERROR - Starlette HTTP 405 error on http://localhost:8000/: Method Not Allowed
2025-09-06 20:00:37,009 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 20:00:37,023 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 20:00:37,287 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 20:00:46,340 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 20:00:46,644 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 20:02:10,250 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 20:02:10,492 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 21:28:02,571 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:28:03,520 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:28:03,655 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 21:28:03,655 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 21:28:03,656 - travel_expense_api - INFO - Testing database connection...
2025-09-06 21:28:03,656 - travel_expense_api - INFO - Database connection successful
2025-09-06 21:28:03,656 - travel_expense_api - INFO - Creating database tables...
2025-09-06 21:28:03,657 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 21:28:03,657 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 21:33:34,874 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 21:33:34,894 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 21:33:35,177 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 21:38:10,337 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:38:11,299 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:38:11,430 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 21:38:11,430 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 21:38:11,431 - travel_expense_api - INFO - Testing database connection...
2025-09-06 21:38:11,432 - travel_expense_api - INFO - Database connection successful
2025-09-06 21:38:11,432 - travel_expense_api - INFO - Creating database tables...
2025-09-06 21:38:11,432 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 21:38:11,433 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 21:39:47,618 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 21:39:47,652 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 21:39:47,934 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 21:42:51,021 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:42:51,193 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 21:42:51,193 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 21:42:51,195 - travel_expense_api - INFO - Testing database connection...
2025-09-06 21:42:51,195 - travel_expense_api - INFO - Database connection successful
2025-09-06 21:42:51,195 - travel_expense_api - INFO - Creating database tables...
2025-09-06 21:42:51,196 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 21:42:51,196 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 21:43:06,748 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:43:06,891 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 21:43:06,891 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 21:43:06,892 - travel_expense_api - INFO - Testing database connection...
2025-09-06 21:43:06,892 - travel_expense_api - INFO - Database connection successful
2025-09-06 21:43:06,892 - travel_expense_api - INFO - Creating database tables...
2025-09-06 21:43:06,893 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 21:43:06,894 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 21:44:26,243 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:44:27,104 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 21:44:27,236 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 21:44:27,236 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 21:44:27,238 - travel_expense_api - INFO - Testing database connection...
2025-09-06 21:44:27,238 - travel_expense_api - INFO - Database connection successful
2025-09-06 21:44:27,238 - travel_expense_api - INFO - Creating database tables...
2025-09-06 21:44:27,239 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 21:44:27,239 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 21:45:34,219 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 21:45:34,232 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-06 21:45:34,578 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 21:45:34,587 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/travels/submit: (sqlite3.OperationalError) table travels has no column named total_expenses
[SQL: INSERT INTO travels (employee_name, employee_id, start_at, end_at, departure_location, departure_timestamp, arrival_at_destination_timestamp, departure_from_destination_timestamp, arrival_home_timestamp, destination_city, destination_country, purpose, total_expenses, cost_center, status) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Max Mustermann', 4, '2025-09-12 00:00:00.000000', '2025-09-13 23:59:59.000000', 'Test Address 123, München, Deutschland', None, None, None, None, 'Stuttgart', 'Germany', 'business', 250.5, None, 'draft')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-06 21:45:34,599 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: table travels has no column named total_expenses

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/api/v1/endpoints.py", line 393, in submit_travel
    travel = await crud_travel.create(db=db, obj_in=travel_in)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/crud/crud_travel.py", line 79, in create
    await db.commit()
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table travels has no column named total_expenses
[SQL: INSERT INTO travels (employee_name, employee_id, start_at, end_at, departure_location, departure_timestamp, arrival_at_destination_timestamp, departure_from_destination_timestamp, arrival_home_timestamp, destination_city, destination_country, purpose, total_expenses, cost_center, status) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Max Mustermann', 4, '2025-09-12 00:00:00.000000', '2025-09-13 23:59:59.000000', 'Test Address 123, München, Deutschland', None, None, None, None, 'Stuttgart', 'Germany', 'business', 250.5, None, 'draft')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-06 21:47:19,751 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-06 21:47:19,992 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
2025-09-06 21:53:05,317 - travel_expense_api - ERROR - Starlette HTTP 404 error on http://localhost:8000/api/v1/health: Not Found
2025-09-06 22:05:49,764 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-06 22:05:50,051 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-06 22:06:09,519 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-06 22:06:09,795 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-06 22:06:56,444 - travel_expense_api - ERROR - Validation error on http://localhost:8000/api/v1/auth/login: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'username=malte%40demo.com&password=employee123'}]
2025-09-06 22:06:56,444 - travel_expense_api - ERROR - Unhandled exception on http://localhost:8000/api/v1/auth/login: Object of type bytes is not JSON serializable
2025-09-06 22:06:56,448 - travel_expense_api - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 346, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'username=malte%40demo.com&password=employee123'}]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 73, in wrapped_app
    response = await handler(conn, exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/backend/app/core/exceptions.py", line 27, in custom_validation_exception_handler
    return JSONResponse(
        status_code=422,
    ...<6 lines>...
        }
    )
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/responses.py", line 178, in __init__
    super().__init__(content, status_code, headers, media_type, background)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ~~~~~~~~~~~^^^^^^^^^
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/starlette/responses.py", line 181, in render
    return json.dumps(
           ~~~~~~~~~~^
        content,
        ^^^^^^^^
    ...<3 lines>...
        separators=(",", ":"),
        ^^^^^^^^^^^^^^^^^^^^^^
    ).encode("utf-8")
    ^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type bytes is not JSON serializable

2025-09-06 22:08:10,168 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 22:08:11,000 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-06 22:08:11,131 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-06 22:08:11,131 - travel_expense_api - INFO - Starting database initialization...
2025-09-06 22:08:11,132 - travel_expense_api - INFO - Testing database connection...
2025-09-06 22:08:11,133 - travel_expense_api - INFO - Database connection successful
2025-09-06 22:08:11,133 - travel_expense_api - INFO - Creating database tables...
2025-09-06 22:08:11,134 - travel_expense_api - INFO - Database tables created successfully
2025-09-06 22:08:11,134 - travel_expense_api - INFO - Database initialized successfully
2025-09-06 22:18:53,136 - travel_expense_api - ERROR - HTTP 403 error on http://localhost:8000/api/v1/admin/dashboard: Not authenticated
2025-09-07 12:41:36,933 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-07 13:56:12,982 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-07 13:57:26,367 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 17:50:35,849 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 17:50:59,979 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 17:53:46,719 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 17:53:47,885 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 17:53:48,012 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 17:53:48,012 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 17:53:48,013 - travel_expense_api - INFO - Testing database connection...
2025-09-09 17:53:48,014 - travel_expense_api - INFO - Database connection successful
2025-09-09 17:53:48,014 - travel_expense_api - INFO - Creating database tables...
2025-09-09 17:53:48,014 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 17:53:48,015 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 17:55:14,193 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 17:55:14,533 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:55:14,549 - travel_expense_api - WARNING - Login failed: User not found for email employee@demo.com
2025-09-09 17:55:14,550 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 17:55:14,551 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 17:57:42,887 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 17:57:43,252 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:43,273 - travel_expense_api - WARNING - Login failed: User not found for email employee@demo.com
2025-09-09 17:57:43,273 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 17:57:43,275 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 17:57:43,300 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:43,302 - travel_expense_api - WARNING - Login failed: User not found for email employee@demo.com
2025-09-09 17:57:43,302 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 17:57:43,303 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 17:57:43,306 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:43,311 - travel_expense_api - WARNING - Login failed: User not found for email employee@demo.com
2025-09-09 17:57:43,312 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 17:57:43,314 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 17:57:43,320 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 17:57:43,598 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 17:57:43,601 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 17:57:43,603 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:43,843 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:43,844 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:43,850 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/travels/: [{'type': 'missing', 'loc': ('body', 'employee_name'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'start_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'end_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_city'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_country'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}]
2025-09-09 17:57:43,851 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 17:57:43,858 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:44,095 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:44,097 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:44,103 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/my "HTTP/1.1 200 OK"
2025-09-09 17:57:44,105 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:44,342 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:44,343 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:44,345 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/travels/: [{'type': 'missing', 'loc': ('body', 'employee_name'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'start_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'end_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_city'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_country'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}]
2025-09-09 17:57:44,345 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 17:57:44,355 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:44,592 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:44,593 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:44,595 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/travels/: [{'type': 'missing', 'loc': ('body', 'employee_name'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'start_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'end_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_city'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_country'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}]
2025-09-09 17:57:44,595 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 17:57:44,605 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:44,858 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:44,859 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:44,862 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/travels/: [{'type': 'missing', 'loc': ('body', 'employee_name'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'start_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'end_at'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_city'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}, {'type': 'missing', 'loc': ('body', 'destination_country'), 'msg': 'Field required', 'input': {'destination': 'Berlin Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 300.0, 'transport_costs': 150.0, 'meal_costs': 120.0, 'other_costs': 30.0, 'total_expenses': 600.0}}]
2025-09-09 17:57:44,863 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 17:57:44,875 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:45,120 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:45,121 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:45,123 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/admin/dashboard: Admin access required
2025-09-09 17:57:45,123 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 403 Forbidden"
2025-09-09 17:57:45,124 - travel_expense_api - ERROR - Starlette HTTP 405 error on http://testserver/api/v1/admin/controllers: Method Not Allowed
2025-09-09 17:57:45,125 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/controllers "HTTP/1.1 405 Method Not Allowed"
2025-09-09 17:57:45,160 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:45,397 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:45,398 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:45,400 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/users/: Admin access required
2025-09-09 17:57:45,401 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/ "HTTP/1.1 403 Forbidden"
2025-09-09 17:57:45,402 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/users/999: Admin access required
2025-09-09 17:57:45,402 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/999 "HTTP/1.1 403 Forbidden"
2025-09-09 17:57:45,404 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:45,641 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:45,642 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:45,658 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/travels/1/approve "HTTP/1.1 200 OK"
2025-09-09 17:57:45,665 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 17:57:45,902 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 17:57:45,903 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 17:57:45,905 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/travels/: [{'type': 'missing', 'loc': ('body', 'employee_name'), 'msg': 'Field required', 'input': {'destination': 'Frankfurt Conference', 'start_date': '2025-09-09', 'end_date': '2025-09-10', 'purpose': 'Tech Conference', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 80.0, 'other_costs': 20.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'start_at'), 'msg': 'Field required', 'input': {'destination': 'Frankfurt Conference', 'start_date': '2025-09-09', 'end_date': '2025-09-10', 'purpose': 'Tech Conference', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 80.0, 'other_costs': 20.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'end_at'), 'msg': 'Field required', 'input': {'destination': 'Frankfurt Conference', 'start_date': '2025-09-09', 'end_date': '2025-09-10', 'purpose': 'Tech Conference', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 80.0, 'other_costs': 20.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'destination_city'), 'msg': 'Field required', 'input': {'destination': 'Frankfurt Conference', 'start_date': '2025-09-09', 'end_date': '2025-09-10', 'purpose': 'Tech Conference', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 80.0, 'other_costs': 20.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'destination_country'), 'msg': 'Field required', 'input': {'destination': 'Frankfurt Conference', 'start_date': '2025-09-09', 'end_date': '2025-09-10', 'purpose': 'Tech Conference', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 80.0, 'other_costs': 20.0, 'total_expenses': 400.0}}]
2025-09-09 17:57:45,905 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:05:32,182 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:05:32,636 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:05:32,991 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 20:06:06,017 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:06:06,357 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:06:06,377 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:06:06,662 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:06:06,674 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:06:06,679 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:06:07,090 - travel_expense_api - WARNING - Login failed: Invalid password for email admin@demo.com
2025-09-09 20:06:07,091 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:06:07,092 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:06:07,099 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:06:07,100 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:06:07,101 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:06:07,338 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:06:07,340 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:06:07,342 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:06:34,213 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:08:07,143 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:08:07,339 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:08:07,339 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:08:07,343 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:08:07,343 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:08:07,343 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:08:07,344 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:08:07,345 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:08:08,668 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:08:08,813 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:08:08,813 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:08:08,813 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:08:08,814 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:08:08,814 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:08:08,815 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:08:08,815 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:10:26,755 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:10:27,150 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:10:27,435 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 20:10:27,437 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 20:10:27,672 - travel_expense_api - INFO - Login successful for user: testuser@demo.com (ID: 8)
2025-09-09 20:10:27,673 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:10:27,676 - travel_expense_api - INFO - Login attempt for email: fake@demo.com
2025-09-09 20:10:27,678 - travel_expense_api - WARNING - Login failed: User not found for email fake@demo.com
2025-09-09 20:10:27,678 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:10:27,679 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:10:27,680 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:10:27,916 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:10:27,917 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:10:27,919 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:11:02,247 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:11:02,579 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:11:02,580 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:11:02,581 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 20:11:02,584 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:11:02,840 - travel_expense_api - INFO - Login successful for user: testuser@demo.com (ID: 8)
2025-09-09 20:11:02,841 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:11:25,899 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:11:26,236 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:11:26,252 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:11:26,509 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:11:26,511 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:11:26,517 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/travels/: [{'type': 'missing', 'loc': ('body', 'employee_name'), 'msg': 'Field required', 'input': {'destination': 'Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 75.0, 'other_costs': 25.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'start_at'), 'msg': 'Field required', 'input': {'destination': 'Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 75.0, 'other_costs': 25.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'end_at'), 'msg': 'Field required', 'input': {'destination': 'Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 75.0, 'other_costs': 25.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'destination_city'), 'msg': 'Field required', 'input': {'destination': 'Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 75.0, 'other_costs': 25.0, 'total_expenses': 400.0}}, {'type': 'missing', 'loc': ('body', 'destination_country'), 'msg': 'Field required', 'input': {'destination': 'Business Trip', 'start_date': '2025-09-09', 'end_date': '2025-09-11', 'purpose': 'Client Meeting', 'accommodation_costs': 200.0, 'transport_costs': 100.0, 'meal_costs': 75.0, 'other_costs': 25.0, 'total_expenses': 400.0}}]
2025-09-09 20:11:26,518 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:12:02,747 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:12:02,889 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:12:02,889 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:12:02,890 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:12:02,891 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:12:02,891 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:12:02,891 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:12:02,892 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:12:10,665 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:12:10,793 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:12:10,793 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:12:10,794 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:12:10,794 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:12:10,794 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:12:10,795 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:12:10,795 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:12:15,643 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:12:15,803 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:12:15,803 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:12:15,803 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:12:15,804 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:12:15,804 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:12:15,805 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:12:15,805 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:12:25,663 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:12:25,811 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:12:25,811 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:12:25,811 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:12:25,812 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:12:25,812 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:12:25,813 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:12:25,813 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:12:31,843 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:12:32,026 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:12:32,026 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:12:32,027 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:12:32,027 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:12:32,027 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:12:32,028 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:12:32,028 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:15:18,658 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:15:19,054 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:15:19,072 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:15:19,340 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:15:19,342 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:15:19,365 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:15:41,981 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:15:42,320 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:15:42,322 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:15:42,323 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 20:15:42,326 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:15:42,601 - travel_expense_api - INFO - Login successful for user: testuser@demo.com (ID: 8)
2025-09-09 20:15:42,602 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:15:42,605 - travel_expense_api - INFO - Login attempt for email: fake@demo.com
2025-09-09 20:15:42,607 - travel_expense_api - WARNING - Login failed: User not found for email fake@demo.com
2025-09-09 20:15:42,607 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:15:42,608 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:15:42,610 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:15:42,856 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:15:42,858 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:15:42,860 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:16:00,831 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:17:32,591 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:17:32,916 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/ "HTTP/1.1 200 OK"
2025-09-09 20:21:08,105 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:21:08,491 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:21:08,492 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:21:08,494 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 20:21:08,497 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:21:08,760 - travel_expense_api - INFO - Login successful for user: testuser@demo.com (ID: 8)
2025-09-09 20:21:08,762 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:21:08,764 - travel_expense_api - INFO - Login attempt for email: fake@demo.com
2025-09-09 20:21:08,766 - travel_expense_api - WARNING - Login failed: User not found for email fake@demo.com
2025-09-09 20:21:08,766 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:21:08,767 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:21:08,769 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:21:09,004 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:21:09,005 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:21:09,008 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:22:35,030 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:22:35,395 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:22:35,396 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:22:35,398 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 20:22:35,400 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:22:35,664 - travel_expense_api - INFO - Login successful for user: testuser@demo.com (ID: 8)
2025-09-09 20:22:35,666 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:35,669 - travel_expense_api - INFO - Login attempt for email: fake@demo.com
2025-09-09 20:22:35,670 - travel_expense_api - WARNING - Login failed: User not found for email fake@demo.com
2025-09-09 20:22:35,671 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:22:35,671 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:22:35,673 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:22:35,913 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:22:35,914 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:35,916 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:22:56,779 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:22:56,982 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:22:56,983 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:22:56,983 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 20:22:56,985 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:22:57,249 - travel_expense_api - INFO - Login successful for user: testuser@demo.com (ID: 8)
2025-09-09 20:22:57,250 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:57,252 - travel_expense_api - INFO - Login attempt for email: fake@demo.com
2025-09-09 20:22:57,253 - travel_expense_api - WARNING - Login failed: User not found for email fake@demo.com
2025-09-09 20:22:57,253 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:22:57,254 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:22:57,254 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:22:57,492 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:22:57,493 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:57,494 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:22:57,496 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:22:57,731 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:22:57,732 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:57,745 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:22:57,747 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:22:57,982 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:22:57,983 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:57,989 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:22:57,992 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:22:57,993 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:22:58,229 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:22:58,230 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:58,235 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:22:58,236 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/travels/13: [{'type': 'missing', 'loc': ('body', 'status'), 'msg': 'Field required', 'input': {'destination_city': 'Munich', 'purpose': 'Updated Meeting'}}]
2025-09-09 20:22:58,237 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/travels/13 "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:22:58,260 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:22:58,494 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:22:58,495 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:58,496 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/admin/employees: Admin access required
2025-09-09 20:22:58,496 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/admin/employees "HTTP/1.1 403 Forbidden"
2025-09-09 20:22:58,497 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/users/: Admin access required
2025-09-09 20:22:58,497 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/users/ "HTTP/1.1 403 Forbidden"
2025-09-09 20:22:58,529 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:22:58,764 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:22:58,765 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:58,766 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/users/: Admin access required
2025-09-09 20:22:58,766 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/ "HTTP/1.1 403 Forbidden"
2025-09-09 20:22:58,771 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/travels/: Not authenticated
2025-09-09 20:22:58,771 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 403 Forbidden"
2025-09-09 20:22:58,775 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 20:22:59,012 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 20:22:59,012 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:59,013 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/admin/dashboard: Admin access required
2025-09-09 20:22:59,014 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 403 Forbidden"
2025-09-09 20:22:59,014 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/admin/employees: Admin access required
2025-09-09 20:22:59,015 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/admin/employees "HTTP/1.1 403 Forbidden"
2025-09-09 20:22:59,016 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/ "HTTP/1.1 200 OK"
2025-09-09 20:22:59,018 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/register: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'role'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:22:59,018 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:22:59,019 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/login: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:22:59,019 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:22:59,260 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 20:22:59,261 - travel_expense_api - INFO - Login attempt for email: workflow@demo.com
2025-09-09 20:22:59,495 - travel_expense_api - INFO - Login successful for user: workflow@demo.com (ID: 9)
2025-09-09 20:22:59,496 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:59,501 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:22:59,503 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:22:59,504 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:22:59,740 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:22:59,741 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:22:59,742 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/admin/employees: Admin access required
2025-09-09 20:22:59,743 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/admin/employees "HTTP/1.1 403 Forbidden"
2025-09-09 20:22:59,743 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/users/: Admin access required
2025-09-09 20:22:59,744 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/users/ "HTTP/1.1 403 Forbidden"
2025-09-09 20:23:28,713 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:23:28,942 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:23:28,943 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:23:28,944 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:23:28,944 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:23:28,944 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:23:28,946 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:23:28,946 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:23:29,476 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:23:29,634 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:23:29,634 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:23:29,636 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:23:29,638 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:23:29,638 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:23:29,639 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:23:29,639 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:25:40,726 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:25:40,924 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:25:41,193 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 20:25:41,194 - travel_expense_api - INFO - Login attempt for email: newuser@example.com
2025-09-09 20:25:41,430 - travel_expense_api - INFO - Login successful for user: newuser@example.com (ID: 10)
2025-09-09 20:25:41,431 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:25:41,673 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 20:25:41,674 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:25:41,909 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:25:41,910 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:25:41,911 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:25:41,915 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:25:41,915 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:25:41,916 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:25:42,151 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:25:42,152 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:25:42,195 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:25:42,197 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:25:42,198 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:25:42,198 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:25:42,434 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:25:42,435 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:25:42,439 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:25:42,440 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/travels/: Not authenticated
2025-09-09 20:25:42,441 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 403 Forbidden"
2025-09-09 20:25:42,441 - travel_expense_api - INFO - Login attempt for email: fake@example.com
2025-09-09 20:25:42,442 - travel_expense_api - WARNING - Login failed: User not found for email fake@example.com
2025-09-09 20:25:42,443 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:25:42,443 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:25:42,444 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/ "HTTP/1.1 200 OK"
2025-09-09 20:25:42,446 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/register: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'role'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:25:42,446 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:25:42,447 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/login: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:25:42,448 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:25:42,687 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 20:25:42,688 - travel_expense_api - INFO - Login attempt for email: journey@example.com
2025-09-09 20:25:42,923 - travel_expense_api - INFO - Login successful for user: journey@example.com (ID: 12)
2025-09-09 20:25:42,924 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:25:42,930 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:25:42,932 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:27:13,452 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:28:03,123 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:28:03,307 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:28:03,308 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:28:03,332 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:28:03,332 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:28:03,333 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:28:03,334 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:28:03,590 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:28:03,591 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:28:03,592 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:28:03,596 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:28:03,596 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:28:03,597 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:28:03,831 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:28:03,832 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:28:03,844 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:28:03,847 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:28:03,847 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:28:03,848 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:28:04,081 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:28:04,082 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:28:04,086 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:28:04,087 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/travels/: Not authenticated
2025-09-09 20:28:04,087 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 403 Forbidden"
2025-09-09 20:28:04,088 - travel_expense_api - INFO - Login attempt for email: fake@example.com
2025-09-09 20:28:04,089 - travel_expense_api - WARNING - Login failed: User not found for email fake@example.com
2025-09-09 20:28:04,089 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:28:04,090 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:28:04,091 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/ "HTTP/1.1 200 OK"
2025-09-09 20:28:04,092 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/register: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'role'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:28:04,092 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:28:04,093 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/login: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:28:04,093 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:28:04,097 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:28:04,098 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:29:15,854 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:29:16,034 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:29:16,035 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:29:16,059 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:29:16,059 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:29:16,060 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:29:16,061 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:29:16,319 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:29:16,320 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:29:16,321 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 20:29:16,325 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:29:16,325 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:29:16,325 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:29:16,560 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:29:16,561 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:29:16,574 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:29:16,576 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:29:16,576 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:29:16,577 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 20:29:16,812 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 11)
2025-09-09 20:29:16,813 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 20:29:16,817 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 20:29:16,818 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/travels/: Not authenticated
2025-09-09 20:29:16,818 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 403 Forbidden"
2025-09-09 20:29:16,819 - travel_expense_api - INFO - Login attempt for email: fake@example.com
2025-09-09 20:29:16,820 - travel_expense_api - WARNING - Login failed: User not found for email fake@example.com
2025-09-09 20:29:16,820 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 20:29:16,820 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 20:29:16,822 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/ "HTTP/1.1 200 OK"
2025-09-09 20:29:16,823 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/register: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'role'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:29:16,823 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:29:16,824 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/login: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}]
2025-09-09 20:29:16,824 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 20:29:16,828 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 20:29:16,828 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 20:29:38,131 - travel_expense_api - ERROR - HTTP 401 error on http://localhost:8000/api/v1/auth/me: Could not validate credentials
2025-09-09 20:30:07,051 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:30:07,084 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:30:07,353 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:32:56,023 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:32:56,289 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:34:01,254 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:34:01,496 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 20:35:25,114 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:35:25,281 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:35:25,281 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:35:25,284 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:35:25,285 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:35:25,285 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:35:25,287 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:35:25,287 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:35:55,236 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:35:56,382 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:35:56,515 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:35:56,515 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:35:56,516 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:35:56,516 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:35:56,516 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:35:56,517 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:35:56,517 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:55:44,105 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:55:45,267 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 20:55:45,397 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 20:55:45,397 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 20:55:45,398 - travel_expense_api - INFO - Testing database connection...
2025-09-09 20:55:45,398 - travel_expense_api - INFO - Database connection successful
2025-09-09 20:55:45,398 - travel_expense_api - INFO - Creating database tables...
2025-09-09 20:55:45,399 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 20:55:45,399 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 20:56:16,113 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 20:56:16,129 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 20:56:16,414 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:01:18,457 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:02:21,416 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:02:21,676 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:13:14,253 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:13:14,506 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:16:33,997 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:16:34,239 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:16:45,181 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:16:45,419 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:16:58,768 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:16:59,006 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:22:04,190 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:22:04,544 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 21:22:04,544 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 21:22:04,546 - travel_expense_api - INFO - Testing database connection...
2025-09-09 21:22:04,546 - travel_expense_api - INFO - Database connection successful
2025-09-09 21:22:04,546 - travel_expense_api - INFO - Creating database tables...
2025-09-09 21:22:04,547 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 21:22:04,548 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 21:22:54,126 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:22:55,538 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:22:55,604 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:22:55,907 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:22:55,910 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:22:55,960 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 200 OK"
2025-09-09 21:22:55,978 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/admin/assign-employee/12/to-controller/2 "HTTP/1.1 200 OK"
2025-09-09 21:22:55,981 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:22:56,241 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:22:56,243 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:22:56,248 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 200 OK"
2025-09-09 21:22:56,258 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/admin/assign-employee/4/to-controller/2 "HTTP/1.1 200 OK"
2025-09-09 21:22:56,267 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/admin/unassign-employee/4 "HTTP/1.1 200 OK"
2025-09-09 21:22:56,269 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:22:56,561 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:22:56,565 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:22:56,822 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 21:22:56,835 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/admin/users/13 "HTTP/1.1 200 OK"
2025-09-09 21:22:56,838 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:22:57,105 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:22:57,106 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:22:57,111 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 200 OK"
2025-09-09 21:23:09,962 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:23:10,142 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 21:23:10,142 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 21:23:10,167 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:23:10,432 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 21:23:10,433 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 21:23:10,668 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 13)
2025-09-09 21:23:10,671 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:10,673 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 21:23:10,678 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 21:23:10,678 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 21:23:10,678 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 21:23:10,914 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 13)
2025-09-09 21:23:10,915 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:10,927 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 21:23:10,929 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 21:23:10,930 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 21:23:10,930 - travel_expense_api - INFO - Login attempt for email: testuser@example.com
2025-09-09 21:23:11,173 - travel_expense_api - INFO - Login successful for user: testuser@example.com (ID: 13)
2025-09-09 21:23:11,174 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:11,180 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 200 OK"
2025-09-09 21:23:11,181 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/travels/: Not authenticated
2025-09-09 21:23:11,181 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/travels/ "HTTP/1.1 403 Forbidden"
2025-09-09 21:23:11,183 - travel_expense_api - INFO - Login attempt for email: fake@example.com
2025-09-09 21:23:11,184 - travel_expense_api - WARNING - Login failed: User not found for email fake@example.com
2025-09-09 21:23:11,184 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 21:23:11,184 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 21:23:11,186 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/ "HTTP/1.1 200 OK"
2025-09-09 21:23:11,187 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/register: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'role'), 'msg': 'Field required', 'input': {}}]
2025-09-09 21:23:11,187 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 21:23:11,188 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/auth/login: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {}}]
2025-09-09 21:23:11,188 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 21:23:11,191 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 21:23:11,192 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 21:23:27,423 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:23:27,746 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:27,764 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:23:28,023 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:28,025 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:28,032 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 200 OK"
2025-09-09 21:23:37,987 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:23:38,331 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:38,351 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:23:38,620 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:38,622 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:38,627 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/admin/employees: [{'type': 'missing', 'loc': ('body', 'company'), 'msg': 'Field required', 'input': {'email': 'newemployee@demo.com', 'password': 'newpass123', 'name': 'New Employee', 'role': 'employee'}}]
2025-09-09 21:23:38,628 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/admin/employees "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 21:23:38,629 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/users/: [{'type': 'missing', 'loc': ('body', 'company'), 'msg': 'Field required', 'input': {'email': 'newemployee@demo.com', 'password': 'newpass123', 'name': 'New Employee', 'role': 'employee'}}]
2025-09-09 21:23:38,629 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/users/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 21:23:38,655 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:38,896 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:38,898 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:38,905 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/ "HTTP/1.1 200 OK"
2025-09-09 21:23:38,907 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 21:23:39,144 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 21:23:39,145 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:39,147 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/admin/dashboard: Admin access required
2025-09-09 21:23:39,147 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 403 Forbidden"
2025-09-09 21:23:39,149 - travel_expense_api - ERROR - HTTP 403 error on http://testserver/api/v1/admin/employees: Admin access required
2025-09-09 21:23:39,149 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/admin/employees "HTTP/1.1 403 Forbidden"
2025-09-09 21:23:39,151 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:39,388 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:39,389 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:39,391 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/admin/employees: [{'type': 'missing', 'loc': ('body', 'company'), 'msg': 'Field required', 'input': {'email': 'admincreated@demo.com', 'password': 'created123', 'name': 'Admin Created User', 'role': 'employee'}}]
2025-09-09 21:23:39,391 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/admin/employees "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 21:23:39,392 - travel_expense_api - ERROR - Validation error on http://testserver/api/v1/users/: [{'type': 'missing', 'loc': ('body', 'company'), 'msg': 'Field required', 'input': {'email': 'admincreated@demo.com', 'password': 'created123', 'name': 'Admin Created User', 'role': 'employee'}}]
2025-09-09 21:23:39,393 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/users/ "HTTP/1.1 422 Unprocessable Entity"
2025-09-09 21:23:39,402 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:39,639 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:39,641 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:39,648 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 200 OK"
2025-09-09 21:23:39,662 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/admin/assign-employee/4/to-controller/2 "HTTP/1.1 200 OK"
2025-09-09 21:23:39,664 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:39,900 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:39,901 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:39,906 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 200 OK"
2025-09-09 21:23:39,916 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/admin/assign-employee/7/to-controller/2 "HTTP/1.1 200 OK"
2025-09-09 21:23:39,923 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/admin/unassign-employee/7 "HTTP/1.1 200 OK"
2025-09-09 21:23:39,925 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:40,170 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:40,172 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:40,416 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 200 OK"
2025-09-09 21:23:40,425 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/admin/users/14 "HTTP/1.1 200 OK"
2025-09-09 21:23:40,427 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:23:40,666 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:23:40,667 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:23:40,672 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/admin/dashboard "HTTP/1.1 200 OK"
2025-09-09 21:24:44,019 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:24:44,050 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:24:44,321 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:25:06,801 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:25:07,073 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:28:55,743 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:28:55,896 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 21:28:55,896 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 21:28:55,897 - travel_expense_api - INFO - Testing database connection...
2025-09-09 21:28:55,898 - travel_expense_api - INFO - Database connection successful
2025-09-09 21:28:55,898 - travel_expense_api - INFO - Creating database tables...
2025-09-09 21:28:55,899 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 21:28:55,899 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 21:29:08,016 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:30:01,958 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:30:02,205 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:30:32,799 - travel_expense_api - ERROR - Starlette HTTP 404 error on http://localhost:8000/frontend/admin.html?id=cef6777f-99ed-40d9-afa4-dc5193811f6c&vscodeBrowserReqId=1757446232794: Not Found
2025-09-09 21:32:50,238 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:32:50,612 - travel_expense_api - ERROR - HTTP 400 error on http://testserver/api/v1/auth/register: Email already registered
2025-09-09 21:32:50,613 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-09-09 21:32:50,615 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 21:32:50,617 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:32:50,877 - travel_expense_api - INFO - Login successful for user: testuser@demo.com (ID: 8)
2025-09-09 21:32:50,878 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:32:50,881 - travel_expense_api - INFO - Login attempt for email: fake@demo.com
2025-09-09 21:32:50,883 - travel_expense_api - WARNING - Login failed: User not found for email fake@demo.com
2025-09-09 21:32:50,883 - travel_expense_api - ERROR - HTTP 401 error on http://testserver/api/v1/auth/login: Incorrect email or password
2025-09-09 21:32:50,884 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-09-09 21:32:50,885 - travel_expense_api - INFO - Login attempt for email: employee@demo.com
2025-09-09 21:32:51,122 - travel_expense_api - INFO - Login successful for user: employee@demo.com (ID: 6)
2025-09-09 21:32:51,123 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-09-09 21:32:51,126 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 200 OK"
2025-09-09 21:34:16,454 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:34:46,538 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:34:47,658 - travel_expense_api - INFO - Initializing database with URL: sqlite+aiosqlite:///./app.db
2025-09-09 21:34:47,793 - travel_expense_api - INFO - Starting TravelExpense API server...
2025-09-09 21:34:47,794 - travel_expense_api - INFO - Starting database initialization...
2025-09-09 21:34:47,794 - travel_expense_api - INFO - Testing database connection...
2025-09-09 21:34:47,795 - travel_expense_api - INFO - Database connection successful
2025-09-09 21:34:47,795 - travel_expense_api - INFO - Creating database tables...
2025-09-09 21:34:47,796 - travel_expense_api - INFO - Database tables created successfully
2025-09-09 21:34:47,796 - travel_expense_api - INFO - Database initialized successfully
2025-09-09 21:35:19,775 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:35:19,812 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/malte/Reisekostenabrechnung/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-09 21:35:20,082 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:38:00,258 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:38:00,506 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:38:16,885 - travel_expense_api - INFO - Login attempt for email: admin@demo.com
2025-09-09 21:38:17,125 - travel_expense_api - INFO - Login successful for user: admin@demo.com (ID: 1)
2025-09-09 21:39:13,237 - travel_expense_api - INFO - Login attempt for email: controller1@demo.com
2025-09-09 21:39:13,515 - travel_expense_api - INFO - Login successful for user: controller1@demo.com (ID: 2)
2025-09-09 21:40:11,132 - travel_expense_api - INFO - Login attempt for email: testuser@demo.com
2025-09-09 21:40:11,405 - travel_expense_api - WARNING - Login failed: Invalid password for email testuser@demo.com
2025-09-09 21:40:11,406 - travel_expense_api - ERROR - HTTP 401 error on http://localhost:8000/api/v1/auth/login: Incorrect email or password
2025-09-09 21:41:52,144 - travel_expense_api - INFO - Login attempt for email: max.mustermann@demo.com
2025-09-09 21:41:52,392 - travel_expense_api - INFO - Login successful for user: max.mustermann@demo.com (ID: 4)
